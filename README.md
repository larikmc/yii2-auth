
# larikmc/yii2-auth

ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ **Yii2 (advanced template, backend)**.

ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ñ€ĞµĞ´Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½ Ğ´Ğ»Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ° Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ñ… Ğ¸ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ¸Ğ¼ĞµÑ‚ÑŒ **Ğ¾Ğ´Ğ½Ñƒ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ, Ğ¾Ğ´Ğ¸Ğ½ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ğ¸ Ğ¾Ğ´Ğ½Ñƒ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸**, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼Ñ‹Ğµ Ñ‡ĞµÑ€ĞµĞ· Composer.

---

## ğŸš€ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- ğŸ” ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (login / logout)
- ğŸ›¡ Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ±Ñ€ÑƒÑ‚Ñ„Ğ¾Ñ€ÑĞ°:
    - Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ğ¿Ğ¾ IP + UserAgent
    - Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    - ÑĞºÑĞ¿Ğ¾Ğ½ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ°
- ğŸ¤– Honeytoken (ÑĞºÑ€Ñ‹Ñ‚Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ² Ğ±Ğ¾Ñ‚Ğ¾Ğ²)
- ğŸ§© CAPTCHA Ğ¿Ğ¾ÑĞ»Ğµ N Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº
- â± Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ñ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€Ğ¾Ğ¼
- ğŸ¨ Ğ¡Ğ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ layout Ğ¸ ÑÑ‚Ğ¸Ğ»Ğ¸ (AssetBundle)
- âš™ Ğ“Ğ¸Ğ±ĞºĞ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

---

## ğŸ“¦ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° (path repository)

```
/projects
â”œâ”€ site1
â”‚  â””â”€ composer.json
â”œâ”€ yii2-auth
â”‚  â””â”€ composer.json
```

```json
"repositories": [
  {
    "type": "path",
    "url": "../yii2-auth",
    "options": {
      "symlink": true
    }
  }
],
"require": {
  "larikmc/yii2-auth": "^1.0"
}
```

```bash
composer update larikmc/yii2-auth
```

---

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: Ñ‡ĞµÑ€ĞµĞ· Git / Composer

```bash
composer require larikmc/yii2-auth:^1.0
```

---

## âš™ ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ

```php
'modules' => [
    'auth' => [
        'class' => larikmc\auth\Module::class,
        'userClass' => \common\models\User::class,
        
         // ğŸ”§ Ğ¿Ñ€Ğ¸ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğ¸ â€” ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
        'maxUserAttempts'      => 1,    // Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ°Ğ· Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¸Ñ‚ÑŒÑÑ Ñ Ğ»Ğ¾Ğ³Ğ¸Ğ½Ğ¾Ğ¼
        'captchaAfterAttempts'=> 3,    // ĞŸĞ¾ÑĞ»Ğµ ÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ CAPTCHA
        'lockDuration'        => 900,  // Ğ’Ñ€ĞµĞ¼Ñ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸ (ÑĞµĞº), 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚      
        'userAttemptsTtl'     => 900,  // Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (ÑĞµĞº)
        'maxDelaySeconds'     => 10,   // ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¿ĞµÑ€ĞµĞ´ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¾Ğ¹
    ],
],
```

---

## ğŸŒ URL

| Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ | URL |
|--------|-----|
| Login | `/auth/login` |
| Logout | `/auth/logout` |
| CAPTCHA | `/auth/auth/captcha` |

---

## ğŸ“Œ Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- PHP >= 7.4
- Yii2 ~2.0
- yii2-bootstrap5

---

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT
